<!doctype html>
<html>
<head>
  <meta charset="utf-8">
  <title>picturepark-sdk-v1-pickers</title>
  
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" 
        integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous">
  <link rel="stylesheet" href="style.css" />
  <script>
    var pictureparkPickers=function(){function e(e,n,o){t[e]={dependencies:n,factory:o},i[0]=e}function n(e){if(t[e])return t[e];if(t[e+"/index"])return t[e+"/index"];return{dependencies:["exports"],factory:function(n){try{Object.defineProperty(n,"__cjsModule",{value:!0}),Object.defineProperty(n,"default",{value:require(e)})}catch(n){throw Error(['module "',e,'" not found.'].join(""))}}}}function o(e){if(r[e])return r[e];if("exports"===e)return{};var t=n(e);r[e]={};var i=t.dependencies.map(function(e){return o(e)});t.factory.apply(t,i);var d=i[t.dependencies.indexOf("exports")];return r[e]=d.__cjsModule?d.default:d,r[e]}var t={},i=[null];e("require",["exports"],function(e){Object.defineProperty(e,"__cjsModule",{value:!0}),Object.defineProperty(e,"default",{value:function(e){return o(e)}})}),e("module",["exports"],function(e){Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"default",{value:window.pictureparkPickers})}),e("index",["require","exports"],function(e,n){"use strict";n.__esModule=!0,n.showContentPicker=void 0,n.showContentPicker=function(e,n){return new Promise(function(o,t){var i,r,d,u=null!==(i=null===n||void 0===n?void 0:n.width)&&void 0!==i?i:1281,c=null!==(r=null===n||void 0===n?void 0:n.height)&&void 0!==r?r:800,l=void 0!=window.screenLeft?window.screenLeft:screen.left,s=void 0!=window.screenTop?window.screenTop:screen.top,a=(window.innerWidth?window.innerWidth:document.documentElement.clientWidth?document.documentElement.clientWidth:screen.width)/2-u/2+l,v=(window.innerHeight?window.innerHeight:document.documentElement.clientHeight?document.documentElement.clientHeight:screen.height)/2-c/2+s,f=e+(e.includes("?")?"&":"?")+"postUrl="+encodeURIComponent(window.location.origin);f+="&returnType=".concat(encodeURIComponent(null!==(d=null===n||void 0===n?void 0:n.returnType)&&void 0!==d?d:"embed")),(null===n||void 0===n?void 0:n.embedName)&&(f+="&embedName=".concat(encodeURIComponent(n.embedName))),(null===n||void 0===n?void 0:n.enableMediaEditor)&&(f+="&enableMediaEditor=true"),(null===n||void 0===n?void 0:n.mediaEditorUnlockPreset)&&(f+="&mediaEditorUnlockPreset=true");var m=window.open(f,"_blank","width="+u+", height="+c+", top="+v+", left="+a+",status=no,location=no,toolbar=no"),p=!1,w=function(t){if((null===n||void 0===n?void 0:n.debug)&&console&&(console.log("CP Message received:"),console.log(t)),e.startsWith(t.origin)){window.removeEventListener("message",w);var i=t.data&&"undefined"!==t.data?JSON.parse(t.data):void 0;p||(p=!0,setTimeout(function(){m.close(),o(i)}))}},h=function(){m.closed?(window.removeEventListener("message",w),p||(p=!0,o(void 0))):setTimeout(function(){return h()},100)};window.addEventListener("message",w),h()})}});var r={};if(null!==i[0])return o(i[0])}();
  </script>
</head>
<body>
  <div class="container">
    <div class="picker-block">
      <div class="picker-insideblock">
        <h1>Picturepark Content Platform</h1>
        <h3>picturepark-sdk-v1-pickers</h3>
        
        <h2>Content Picker Sample</h2>
        <p class="btn-class">
          <button class="btn btn-default" id="openContentPicker">Open content picker</button>
          <button class="btn btn-default" id="openContentPickerLocalhost">Open content picker (localhost)</button>
        </p>
        <p>
          <strong>Received object (JSON): </strong>
          <pre id="receivedJson">n/a</pre>
        </p>
        <!-- <h3>Open content picker (localhost): </h3>
        <p>
          Opens the content picker from <strong>http://localhost:4500</strong><br />
        </p> -->
      </div>
    </div>
  </div>

  <script>
  function openContentPicker(pickerUrl, settings) {
      pictureparkPickers.showContentPicker(pickerUrl, settings).then(function (returnValue) {
        console.log(returnValue);
        if (returnValue) {
          document.getElementById('receivedJson').innerHTML = JSON.stringify(returnValue, null, 2);
          window.opener.document.getElementById("cke_54_textInput").value = "https://iknow.poc-picturepark.com/v/qh8ZQLNl/"; 
          self.close();
        }else {
          document.getElementById('receivedJson').innerHTML = "No content items selected.";
        }
      });
    };

    document.getElementById("openContentPicker").onclick = openContentPicker.bind(null, "https://iknow.poc-picturepark.com/contentPicker", {
      debug: false,
      width: 1400,
      height: 800,
      embedName: 'Caller defined embed name',
      returnType: 'embed',
      enableMediaEditor: true,
      mediaEditorUnlockPreset: false
    });

    document.getElementById("openContentPickerLocalhost").onclick = openContentPicker.bind(null, "http://localhost:4500/contentPicker", {
      debug: false,
      width: 1400,
      height: 800,
      embedName: 'Caller defined embed name',
      returnType: 'embed',
      enableMediaEditor: true,
      mediaEditorUnlockPreset: false
    });
  </script>
</body>
</html>